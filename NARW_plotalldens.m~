% NARW_plotalldens

% import flow speed for the tag
load(['/Users/julievanderhoop/Dropbox (Personal)/tag/tagdata/' tag '_flowspeed.mat'])

% calculate dive duration
ddur = T(:,2)-T(:,1);

figure(19),
subplot(2,2,1), hold on
for i = 1:length(dive)
    if isempty(dive(i).stops) == 0
        dive(i).clearingtime = [dive(i).stops(:,2)-dive(i).stops(:,1)]';
        plot(ddur(i),mean(dive(i).clearingtime),'o')
    end
end
xlabel('Dive Duration (sec)'), ylabel('Inter-Pause Interval (sec)')

subplot(2,2,2), hold on
if tag == tags{1}
    bolus = 0.5; % half a kg
    densities = 0.001:0.001:0.01;
    for i = 1:length(volrate)
        cleartime(i,:) = bolus./densities/volrate(i);
    end
    c = viridis(size(cleartime,2)); % color by densities
    for i = 1:size(cleartime,2)
        plot(speed, cleartime(:,i),'color',c(i,:))
    end
    xlabel('Swimming Speed (m/s)'), ylabel('Clearing Time (sec)')
    C = regexp(sprintf('density=%.3f#', densities), '#', 'split');
    legend(C)
end
for i = 1:length(dive) % or 1:19 or 1:4 7:length(dive)
    if isempty(dive(i).mnspeedperblock) == 0
        plot(dive(i).mnspeedperblock,dive(i).stops(:,2)-dive(i).stops(:,1),'o')
    end
    pause
end

% plot pitch track
if exist('ptrack','var') == 1
    , hold on % plot pitch track to see what happens/where they go after dive
    plot3(ptrack(:,1),ptrack(:,2),-p,'color',[0.5 0.5 0.5])
    plot3(ptrack(dcue*fs,1),ptrack(dcue*fs,2),-p(dcue*fs),'linewidth',2)

end
